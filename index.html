<!DOCTYPE HTML>
<head>
  <title>ninja</title>
  <link type="text/css" rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/css/bootstrap.min.css" />
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAstJmdJy_2z18aTjjVLMS8H0TqZ-0Fueo&sensor=true"
  type="text/javascript"></script>
  <style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map-canvas { height: 100% }
</style>

<script type="text/javascript">
var watchID;
var geoLoc;



function loadMap(lat, lng) {
  var myLatlng = new google.maps.LatLng(lat,lng);
  var mapOptions = {
    zoom: 14,
    center: myLatlng
  }
  var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

  var marker = new google.maps.Marker({
      position: myLatlng,
      title:"Current location (best guess)"
  });

  // To add the marker to the map, call setMap();
  marker.setMap(map);
}




function showLocation(position) {
  var latitude = position.coords.latitude;
  var longitude = position.coords.longitude;
  console.log('getting ready...');

  loadMap(latitude, longitude);
  //alert("Latitude : " + latitude + " Longitude: " + longitude);
}

function errorHandler(err) {
  if(err.code == 1) {
    alert("Error: Access is denied!");
  }else if( err.code == 2) {
    alert("Error: Position is unavailable!");
  }
}
function getLocationUpdate(){

   if(navigator.geolocation){
      // timeout at 60000 milliseconds (60 seconds)
      var options = {timeout:60000};
      geoLoc = navigator.geolocation;
      watchID = geoLoc.watchPosition(showLocation, 
                                     errorHandler,
                                     options);
   }else{
      alert("Sorry, browser does not support geolocation!");
   }
}
</script>
</head>
<html>
<body>
   <form>

    <div id="map-canvas" style="width: 100%; height: 500px;">foo</div>
     <input type="button" onclick="getLocationUpdate();"  
                             value="Watch Update"/>
   </form>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js" ></script>
</body>
</html>